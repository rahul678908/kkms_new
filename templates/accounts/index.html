{% load static %}
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]--> <html class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>{% block title %}{{ couple.groom_name|default:"Welcome to" }} & {{ couple.bride_name|default:"KERALA KAIKOLA/MUDALI SANGAM" }} - Wedding{% endblock %}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="{% block description %}Wedding invitation for {{ couple.groom_name|default:"Groom" }} and {{ couple.bride_name|default:"Bride" }}{% endblock %}" />
	<meta name="keywords" content="wedding, invitation, celebration, marriage" />
	<meta name="author" content="{{ couple.groom_name|default:"Groom" }} & {{ couple.bride_name|default:"Bride" }}" />

	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content="{{ couple.groom_name|default:"Groom" }} & {{ couple.bride_name|default:"Bride" }} - Wedding"/>
	<meta property="og:image" content="{% static 'images/couple-main.jpg' %}"/>
	<meta property="og:url" content="{{ request.build_absolute_uri }}"/>
	<meta property="og:site_name" content="Wedding Invitation"/>
	<meta property="og:description" content="Join us in celebrating our special day"/>
	<meta name="twitter:title" content="{{ couple.groom_name|default:"Groom" }} & {{ couple.bride_name|default:"Bride" }} - Wedding" />
	<meta name="twitter:image" content="{% static 'images/couple-main.jpg' %}" />
	<meta name="twitter:url" content="{{ request.build_absolute_uri }}" />
	<meta name="twitter:card" content="summary_large_image" />

	<link href='https://fonts.googleapis.com/css?family=Work+Sans:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
	<link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="{% static 'css/animate.css' %}">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
	<!-- Theme style  -->
	<link rel="stylesheet" href="{% static 'css/style.css' %}">
	<!-- Modernizr JS -->
	<script src="{% static 'js/modernizr-2.6.2.min.js' %}"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="{% static 'js/respond.min.js' %}"></script>
	<![endif]-->

	{% block extra_css %}
	<style>
		.login-btn-nav {
			margin-left: 20px !important;
		}
		.btn-login {
			background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%) !important;
			color: white !important;
			padding: 10px 20px !important;
			border-radius: 25px !important;
			font-size: 13px !important;
			font-weight: 600 !important;
			text-decoration: none !important;
			display: inline-flex !important;
			align-items: center !important;
			gap: 8px !important;
			transition: all 0.3s ease !important;
			border: none !important;
			box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3) !important;
			text-transform: uppercase !important;
			letter-spacing: 0.5px !important;
			white-space: nowrap !important;
		}
		.btn-login:hover {
			background: linear-gradient(135deg, #357ABD 0%, #2E6DA4 100%) !important;
			transform: translateY(-2px) !important;
			box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4) !important;
			color: white !important;
			text-decoration: none !important;
		}
		.btn-login:focus, 
		.btn-login:active {
			color: white !important;
			text-decoration: none !important;
			outline: none !important;
		}
		.btn-login i {
			font-size: 14px !important;
		}

		/* Hamburger Menu Styling - Only visible on mobile */
		.hamburger-menu {
			display: none;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			width: 40px;
			height: 40px;
			cursor: pointer;
			padding: 5px;
			border-radius: 8px;
			transition: all 0.3s ease;
			background: transparent;
			border: none;
			position: relative;
		}
		.hamburger-menu:hover {
			background: rgba(74, 144, 226, 0.1);
		}
		.hamburger-line {
			width: 25px;
			height: 3px;
			background: #333;
			margin: 3px 0;
			transition: all 0.3s ease;
			border-radius: 2px;
		}
		.hamburger-menu.active .hamburger-line:nth-child(1) {
			transform: rotate(45deg) translate(6px, 6px);
			background: #4A90E2;
		}
		.hamburger-menu.active .hamburger-line:nth-child(2) {
			opacity: 0;
		}
		.hamburger-menu.active .hamburger-line:nth-child(3) {
			transform: rotate(-45deg) translate(6px, -6px);
			background: #4A90E2;
		}

		/* Mobile Menu Overlay */
		.mobile-menu-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100vh;
			background: rgba(0, 0, 0, 0.8);
			z-index: 999;
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
			backdrop-filter: blur(5px);
		}
		.mobile-menu-overlay.active {
			opacity: 1;
			visibility: visible;
		}

		/* Mobile Menu Container */
		.mobile-menu {
			position: fixed;
			top: 0;
			right: -350px;
			width: 320px;
			height: 100vh;
			background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
			z-index: 1000;
			transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
			box-shadow: -5px 0 25px rgba(0, 0, 0, 0.2);
			overflow-y: auto;
		}
		.mobile-menu.active {
			right: 0;
		}

		/* Mobile Menu Header */
		.mobile-menu-header {
			padding: 20px;
			border-bottom: 1px solid #e9ecef;
			display: flex;
			justify-content: space-between;
			align-items: center;
			background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
			color: white;
		}
		.mobile-menu-header h3 {
			margin: 0;
			font-size: 18px;
			font-weight: 600;
		}
		.mobile-menu-close {
			background: none;
			border: none;
			color: white;
			font-size: 24px;
			cursor: pointer;
			padding: 5px;
			border-radius: 50%;
			width: 35px;
			height: 35px;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
		}
		.mobile-menu-close:hover {
			background: rgba(255, 255, 255, 0.2);
		}

		/* Mobile Menu Items */
		.mobile-menu-items {
			padding: 20px 0;
		}
		.mobile-menu-item {
			display: block;
			padding: 15px 25px;
			color: #333;
			text-decoration: none;
			font-weight: 500;
			font-size: 16px;
			border-bottom: 1px solid #f0f0f0;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}
		.mobile-menu-item:before {
			content: '';
			position: absolute;
			left: -100%;
			top: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(74, 144, 226, 0.1), transparent);
			transition: all 0.5s ease;
		}
		.mobile-menu-item:hover:before {
			left: 100%;
		}
		.mobile-menu-item:hover {
			background: rgba(74, 144, 226, 0.05);
			color: #4A90E2;
			padding-left: 35px;
		}
		.mobile-menu-item.active {
			background: rgba(74, 144, 226, 0.1);
			color: #4A90E2;
			border-left: 4px solid #4A90E2;
		}
		.mobile-menu-item i {
			margin-right: 10px;
			width: 20px;
			text-align: center;
		}

		/* Mobile Login Section */
		.mobile-login-section {
			padding: 20px 25px;
			border-top: 1px solid #e9ecef;
			margin-top: auto;
		}
		.mobile-btn-login {
			display: block;
			width: 100%;
			background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
			color: white;
			padding: 15px 20px;
			border-radius: 25px;
			font-size: 16px;
			font-weight: 600;
			text-decoration: none;
			text-align: center;
			box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
			transition: all 0.3s ease;
			border: none;
		}
		.mobile-btn-login:hover {
			background: linear-gradient(135deg, #357ABD 0%, #2E6DA4 100%);
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
			color: white;
			text-decoration: none;
		}

		/* Hide mobile menu elements on desktop */
		@media (min-width: 769px) {
			.hamburger-menu,
			.mobile-menu-overlay,
			.mobile-menu {
				display: none !important;
			}
			.navbar-toggle,
			.navbar-collapse {
				display: none !important;
			}
		}

		/* Mobile Responsive Styles */
		@media (max-width: 768px) {
			.fh5co-nav .menu-1 ul {
				display: none !important;
			}
			.hamburger-menu {
				display: flex !important;
			}
			.fh5co-nav .col-xs-10 {
				display: flex;
				justify-content: flex-end;
				align-items: center;
			}
			.mobile-menu {
				width: 280px;
				right: -280px;
			}
		}
		@media (max-width: 480px) {
			.mobile-menu {
				width: 100%;
				right: -100%;
			}
			.mobile-menu-item {
				padding: 12px 20px;
				font-size: 15px;
			}
		}

		/* News Section Styling */
		.fh5co-news {
			padding: 60px 0;
			background: #f8f9fa;
		}
		.fh5co-news .news-wrap {
			margin-bottom: 30px;
			padding: 20px;
			background: #fff;
			border-radius: 12px;
			box-shadow: 0 4px 20px rgba(0,0,0,0.08);
			transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
			position: relative;
			overflow: hidden;
		}
		.fh5co-news .news-wrap:hover {
			transform: translateY(-8px);
			box-shadow: 0 12px 40px rgba(0,0,0,0.15);
		}
		
		/* ENHANCED IMAGE SLIDER STYLES */
		.image-slider-container {
			position: relative;
			width: 100%;
			height: 280px;
			margin-bottom: 20px;
			border-radius: 12px;
			overflow: hidden;
			background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
			box-shadow: 0 4px 15px rgba(0,0,0,0.1);
		}
		
		.image-slider {
			position: relative;
			width: 100%;
			height: 100%;
			overflow: hidden;
			border-radius: 12px;
		}
		
		.slider-track {
			display: flex;
			width: 100%;
			height: 100%;
			transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		.slider-image {
			flex: 0 0 100%;
			width: 100%;
			height: 100%;
			object-fit: cover;
			user-select: none;
			-webkit-user-drag: none;
		}
		
		/* ENHANCED NAVIGATION BUTTONS */
		.slider-nav-btn {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			background: rgba(0, 0, 0, 0.7);
			color: white;
			border: none;
			padding: 0;
			cursor: pointer;
			font-size: 24px;
			border-radius: 50%;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			z-index: 15;
			width: 50px;
			height: 50px;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
			backdrop-filter: blur(10px);
			font-family: Arial, sans-serif;
			font-weight: bold;
			opacity: 0.9;
		}
		
		.slider-nav-btn:hover {
			background: rgba(0, 0, 0, 0.9);
			transform: translateY(-50%) scale(1.1);
			box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
			opacity: 1;
		}
		
		.slider-nav-btn:active {
			transform: translateY(-50%) scale(0.95);
		}
		
		.slider-prev {
			left: 15px;
		}
		
		.slider-next {
			right: 15px;
		}
		
		/* Show buttons on hover for desktop */
		.image-slider-container:hover .slider-nav-btn {
			opacity: 1;
		}
		
		/* Always show buttons on mobile */
		@media (max-width: 768px) {
			.slider-nav-btn {
				opacity: 1;
				width: 40px;
				height: 40px;
				font-size: 18px;
			}
			
			.slider-prev {
				left: 10px;
			}
			
			.slider-next {
				right: 10px;
			}
		}
		
		/* ENHANCED DOTS NAVIGATION */
		.slider-dots {
			position: absolute;
			bottom: 15px;
			left: 50%;
			transform: translateX(-50%);
			display: flex;
			gap: 10px;
			z-index: 10;
			background: rgba(0, 0, 0, 0.3);
			padding: 8px 16px;
			border-radius: 25px;
			backdrop-filter: blur(10px);
		}
		
		.slider-dot {
			width: 12px;
			height: 12px;
			border-radius: 50%;
			background: rgba(255, 255, 255, 0.5);
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			border: 2px solid rgba(255, 255, 255, 0.3);
			position: relative;
		}
		
		.slider-dot.active {
			background: #ffffff;
			transform: scale(1.3);
			box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
		}
		
		.slider-dot:hover {
			background: rgba(255, 255, 255, 0.8);
			transform: scale(1.1);
		}
		
		/* Loading animation for dots */
		.slider-dot.active::before {
			content: '';
			position: absolute;
			top: -2px;
			left: -2px;
			right: -2px;
			bottom: -2px;
			border: 2px solid #ffffff;
			border-radius: 50%;
			animation: dotPulse 2s infinite;
		}
		
		@keyframes dotPulse {
			0% {
				transform: scale(1);
				opacity: 1;
			}
			100% {
				transform: scale(1.5);
				opacity: 0;
			}
		}
		
		/* Single image fallback */
		.news-image {
			width: 100%;
			height: 280px;
			object-fit: cover;
			border-radius: 12px;
			margin-bottom: 20px;
			transition: transform 0.3s ease;
		}
		
		.news-image:hover {
			transform: scale(1.02);
		}
		
		/* Hide navigation for single images */
		.single-image .slider-nav-btn,
		.single-image .slider-dots {
			display: none;
		}
		
		/* Touch interaction feedback */
		.image-slider-container.touching {
			cursor: grabbing;
		}
		
		.image-slider-container.touching .slider-track {
			transition: none;
		}
		
		/* News content styling */
		.fh5co-news .news-wrap h3 {
			font-family: 'Work Sans', sans-serif;
			font-size: 24px;
			color: #333;
			margin-bottom: 15px;
			line-height: 1.3;
			font-weight: 600;
		}
		.fh5co-news .news-wrap p {
			font-family: 'Work Sans', sans-serif;
			color: #666;
			font-size: 16px;
			line-height: 1.6;
			margin-bottom: 12px;
		}
		.fh5co-news .news-wrap .news-date {
			color: #999;
			font-size: 14px;
			font-style: italic;
			font-weight: 500;
		}
		.fh5co-news .no-articles {
			color: #666;
			font-size: 18px;
			text-align: center;
			padding: 40px 20px;
			background: white;
			border-radius: 12px;
			box-shadow: 0 4px 20px rgba(0,0,0,0.08);
		}

		/* Hero Section Styling */
		.hero-section {
			background-size: cover !important;
			background-position: center !important;
			background-repeat: no-repeat !important;
			min-height: 100rem !important;
			display: flex !important;
			align-items: center !important;
			justify-content: center !important;
			position: relative !important;
			width: 100% !important;
			background-color: #f5f5f5;
		}
		.hero-section .container {
			position: relative !important;
			z-index: 2 !important;
			text-align: center !important;
			max-width: 800px !important;
			padding: 20px !important;
		}
		.hero-section::before {
			content: "" !important;
			position: absolute !important;
			top: 0 !important;
			left: 0 !important;
			width: 100% !important;
			height: 100% !important;
			background: rgba(0, 0, 0, 0.5) !important;
			z-index: 1 !important;
		}
		.hero-section h1 {
			font-family: 'Sacramento', cursive;
			font-size: 48px;
			color: #fff;
			margin-bottom: 15px;
			line-height: 1.2;
			text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
		}
		.hero-section p.lead {
			font-family: 'Work Sans', sans-serif;
			font-size: 24px;
			color: #fff;
			margin-bottom: 10px;
			text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
		}
		.hero-section p {
			font-family: 'Work Sans', sans-serif;
			font-size: 18px;
			color: #fff;
			text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
		}

		@media (max-width: 768px) {
			.hero-section {
				min-height: 350px !important;
			}
			.hero-section h1 {
				font-size: 36px;
			}
			.hero-section p.lead {
				font-size: 20px;
			}
			.hero-section p {
				font-size: 16px;
			}
			.fh5co-news .news-wrap {
				margin-bottom: 25px;
			}
			.image-slider-container {
				height: 220px;
			}
		}
	</style>
	{% endblock %}
</head>
<body>
	<div class="fh5co-loader"></div>
	<div id="page">
		<!-- Navigation -->
        <nav class="fh5co-nav" role="navigation">
            <div class="container">
                <div class="row">
                    <div class="col-xs-2">
                        <!-- Logo Image instead of text -->
                        <div id="fh5co-logo">
                            <a href="{% url 'home' %}">
                                <img src="{% static 'images/logo.png' %}" alt="KKMS Logo" style="height: 40px;">
                            </a>
                        </div>
                    </div>
                    <div class="col-xs-10 text-right menu-1">
                        <ul>
                            <li class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                                <a href="/">Home</a>
                            </li>
                            <li class="{% if request.resolver_match.url_name == 'about' %}active{% endif %}">
                                <a href="/about/">About KKMS</a>
                            </li>
                            <li class="has-dropdown {% if request.resolver_match.url_name == 'history' or request.resolver_match.url_name == 'registration' %}active{% endif %}">
                                <a href="#">Information</a>
                                <ul class="dropdown">
                                    <li><a href="/history/">History</a></li>
                                    <li><a href="/registration/">Registration Form</a></li>
                                </ul>
                            </li>
                            <li class="{% if request.resolver_match.url_name == 'charity' %}active{% endif %}">
                                <a href="/charity/">Charity</a>
                            </li>
                            <li class="has-dropdown {% if request.resolver_match.url_name == 'privacy_policy' or request.resolver_match.url_name == 'terms' %}active{% endif %}">
                                <a href="#">Policy</a>
                                <ul class="dropdown">
                                    <li><a href="/privacy-policy/">Privacy Policy</a></li>
                                    <li><a href="/terms-and-conditions/">Terms & Conditions</a></li>
                                </ul>
                            </li>
                            <li class="{% if request.resolver_match.url_name == 'contact' %}active{% endif %}">
                                <a href="/contact/">Contact</a>
                            </li>
                            <li class="{% if request.resolver_match.url_name == 'register' %}active{% endif %}">
                                <a href="/register-customer/">Matrimony Register</a>
                            </li>
                            <li class="login-btn-nav">
                                <a href="/customer-login/" class="btn-login">
                                    <i class="icon-user"></i> Login
                                </a>
                            </li>
                        </ul>
                        
                        <!-- Hamburger Menu for Mobile -->
                        <button class="hamburger-menu" id="hamburgerMenu" type="button" aria-label="Toggle navigation">
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-header">
                <h3>Menu</h3>
                <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close menu">×</button>
            </div>
            <div class="mobile-menu-items">
                <a href="/" class="mobile-menu-item {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                    <i class="icon-home"></i> Home
                </a>
                <a href="/about/" class="mobile-menu-item {% if request.resolver_match.url_name == 'about' %}active{% endif %}">
                    <i class="icon-info"></i> About KKMS
                </a>
                <a href="/history/" class="mobile-menu-item {% if request.resolver_match.url_name == 'history' %}active{% endif %}">
                    <i class="icon-book"></i> History
                </a>
                <a href="/registration/" class="mobile-menu-item {% if request.resolver_match.url_name == 'registration' %}active{% endif %}">
                    <i class="icon-edit"></i> Registration Form
                </a>
                <a href="/charity/" class="mobile-menu-item {% if request.resolver_match.url_name == 'charity' %}active{% endif %}">
                    <i class="icon-heart"></i> Charity
                </a>
                <a href="/privacy-policy/" class="mobile-menu-item {% if request.resolver_match.url_name == 'privacy_policy' %}active{% endif %}">
                    <i class="icon-shield"></i> Privacy Policy
                </a>
                <a href="/terms-and-conditions/" class="mobile-menu-item {% if request.resolver_match.url_name == 'terms' %}active{% endif %}">
                    <i class="icon-document"></i> Terms & Conditions
                </a>
                <a href="/contact/" class="mobile-menu-item {% if request.resolver_match.url_name == 'contact' %}active{% endif %}">
                    <i class="icon-phone"></i> Contact
                </a>
                <a href="/register-customer/" class="mobile-menu-item {% if request.resolver_match.url_name == 'register' %}active{% endif %}">
                    <i class="icon-users"></i> Matrimony Register
                </a>
            </div>
            <div class="mobile-login-section">
                <a href="/customer-login/" class="mobile-btn-login">
                    <i class="icon-user"></i> Login
                </a>
            </div>
        </div>
		
		<!-- Hero/Banner Section -->
		<section class="hero-section" style="background-image: url('{{ banner.banner_image.url }}');">
			<div class="container text-white">
				<h1>{{ banner.banner_text1 }}</h1>
				<p class="lead">{{ banner.banner_text2 }}</p>
				<p>{{ banner.banner_text3 }}</p>
			</div>
		</section>

		<div id="fh5co-event" class="fh5co-bg" style="background-image:url({% static 'images/img_bg_3.jpg' %});">
			<div class="overlay"></div>
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 text-center fh5co-heading animate-box">
						<span>Our Special Events</span>
						<h2>Wedding Events</h2>
					</div>
				</div>
				<div class="row">
					<div class="display-t">
						<div class="display-tc">
							<div class="col-md-10 col-md-offset-1">
								{% for event in wedding_events %}
								<div class="col-md-6 col-sm-6 text-center">
									<div class="event-wrap animate-box">
										<h3>{{ event.name }}</h3>
										<div class="event-col">
											<i class="icon-clock"></i>
											<span>{{ event.start_time|time:"g:i A" }}</span>
											<span>{{ event.end_time|time:"g:i A" }}</span>
										</div>
										<div class="event-col">
											<i class="icon-calendar"></i>
											<span>{{ event.date|date:"l j" }}</span>
											<span>{{ event.date|date:"F, Y" }}</span>
										</div>
										<p>{{ event.description }}</p>
									</div>
								</div>
								{% empty %}
								<div class="col-md-6 col-sm-6 text-center">
									<div class="event-wrap animate-box">
										<h3>Main Ceremony</h3>
										<div class="event-col">
											<i class="icon-clock"></i>
											<span>4:00 PM</span>
											<span>6:00 PM</span>
										</div>
										<div class="event-col">
											<i class="icon-calendar"></i>
											<span>{{ wedding_date|date:"l j" }}</span>
											<span>{{ wedding_date|date:"F, Y" }}</span>
										</div>
										<p>Join us for our wedding ceremony where we exchange vows and begin our journey together as husband and wife.</p>
									</div>
								</div>
								<div class="col-md-6 col-sm-6 text-center">
									<div class="event-wrap animate-box">
										<h3>Wedding Reception</h3>
										<div class="event-col">
											<i class="icon-clock"></i>
											<span>7:00 PM</span>
											<span>12:00 AM</span>
										</div>
										<div class="event-col">
											<i class="icon-calendar"></i>
											<span>{{ wedding_date|date:"l j" }}</span>
											<span>{{ wedding_date|date:"F, Y" }}</span>
										</div>
										<p>Celebrate with us at our reception with dinner, dancing, and festivities to honor our special day.</p>
									</div>
								</div>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="fh5co-news" class="fh5co-section-gray">
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 text-center fh5co-heading animate-box">
						<span>Latest Updates</span>
						<h2>News & Announcements</h2>
						<p>Stay updated with the latest news from KERALA KAIKOLA/MUDALI SANGAM</p>
					</div>
				</div>
				<div class="row row-bottom-padded-md">
					<div class="col-md-12">
						<div class="row">
							{% for news in news_articles %}
							<div class="col-md-4 col-sm-6 news-wrap animate-box" data-animate-effect="fadeIn">
								<!-- Image Slider for Multiple Images -->
								{% if news.images.count > 1 %}
								<div class="image-slider-container" data-slider-id="{{ news.id }}">
									<div class="image-slider">
										<div class="slider-track">
											{% for image in news.images.all %}
											<img class="slider-image" src="/media/{{ image.image }}" alt="{{ news.title|escape }} - Image {{ forloop.counter }}" loading="lazy">
											{% endfor %}
										</div>
										<button class="slider-nav-btn slider-prev" aria-label="Previous image" type="button">‹</button>
										<button class="slider-nav-btn slider-next" aria-label="Next image" type="button">›</button>
										<div class="slider-dots">
											{% for image in news.images.all %}
											<span class="slider-dot{% if forloop.first %} active{% endif %}" data-slide="{{ forloop.counter0 }}" role="button" tabindex="0" aria-label="Go to slide {{ forloop.counter }}"></span>
											{% endfor %}
										</div>
									</div>
								</div>
								{% elif news.images.count == 1 %}
								<!-- Single Image -->
								<div class="image-slider-container single-image">
									<img class="news-image" src="/media/{{ news.images.first.image }}" alt="{{ news.title|escape }}" loading="lazy">
								</div>
								{% elif news.image %}
								<!-- Fallback to old image field -->
								<img class="news-image" src="/media/{{ news.image }}" alt="{{ news.title|escape }}" loading="lazy">
								{% else %}
								<!-- Placeholder -->
								<img class="news-image" src="{% static 'images/placeholder.jpg' %}" alt="No Image" loading="lazy">
								{% endif %}
								
								<h3>{{ news.title }}</h3>
								<p>{{ news.content|truncatewords:30 }}</p>
								<p class="news-date">{{ news.created_date|date:"M d, Y" }}</p>
							</div>
							{% empty %}
							<div class="col-md-12 no-articles animate-box" data-animate-effect="fadeIn">
								<p>No news articles available.</p>
							</div>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer id="fh5co-footer" role="contentinfo">
			<div class="container">
				<div class="row copyright">
					<div class="col-md-12 text-center">
						<p>
							<small class="block">© {% now "Y" %} {{ about.author|default:"KKMS Team" }}. All Rights Reserved.</small> 
							<small class="block">Designed and Developed by <a href="https://www.techfifoinnovations.com/" target="_blank">TechFIFO Innovations</a></small>
						</p>
						<p>
							<ul class="fh5co-social-icons">
								{% if social_links.twitter %}<li><a href="{{ social_links.twitter }}"><i class="icon-twitter"></i></a></li>{% endif %}
								{% if social_links.facebook %}<li><a href="{{ social_links.facebook }}"><i class="icon-facebook"></i></a></li>{% endif %}
								{% if social_links.instagram %}<li><a href="{{ social_links.instagram }}"><i class="icon-instagram"></i></a></li>{% endif %}
								{% if social_links.linkedin %}<li><a href="{{ social_links.linkedin }}"><i class="icon-linkedin"></i></a></li>{% endif %}
							</ul>
						</p>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- Scripts -->
	<script src="{% static 'js/jquery.min.js' %}"></script>
	<script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
	<script src="{% static 'js/owl.carousel.min.js' %}"></script>
	<script src="{% static 'js/jquery.countTo.js' %}"></script>
	<script src="{% static 'js/jquery.stellar.min.js' %}"></script>
	<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
	<script src="{% static 'js/magnific-popup-options.js' %}"></script>
	<script src="{% static 'js/simplyCountdown.js' %}"></script>
	<script src="{% static 'js/main.js' %}"></script>

	<script>
		$(document).ready(function() {
			// Hide loader on page load
			$('.fh5co-loader').fadeOut('slow');

			// Countdown Timer
			{% if wedding_date %}
			var weddingDate = new Date('{{ wedding_date|date:"Y-m-d" }}T00:00:00Z');
			simplyCountdown('.simply-countdown-one', {
				year: weddingDate.getFullYear(),
				month: weddingDate.getMonth() + 1,
				day: weddingDate.getDate(),
				hours: weddingDate.getHours(),
				minutes: weddingDate.getMinutes(),
				seconds: weddingDate.getSeconds()
			});
			{% endif %}

			// Carousel
			$('.owl-carousel-fullwidth').owlCarousel({
				animateOut: 'fadeOut',
				animateIn: 'fadeIn',
				items: 1,
				loop: true,
				margin: 10,
				nav: true,
				dots: true,
				autoplay: true,
				autoplayTimeout: 5000,
				autoplayHoverPause: true
			});
			$('.js-counter').countTo();

			// Enhanced Mobile Menu Functionality
			const hamburgerMenu = $('#hamburgerMenu');
			const mobileMenu = $('#mobileMenu');
			const mobileMenuOverlay = $('#mobileMenuOverlay');
			const mobileMenuClose = $('#mobileMenuClose');

			// Open mobile menu
			hamburgerMenu.on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				
				$(this).addClass('active');
				mobileMenuOverlay.addClass('active');
				
				setTimeout(() => {
					mobileMenu.addClass('active');
					$('body').css('overflow', 'hidden');
				}, 100);
			});

			// Close mobile menu function
			function closeMobileMenu() {
				hamburgerMenu.removeClass('active');
				mobileMenu.removeClass('active');
				
				setTimeout(() => {
					mobileMenuOverlay.removeClass('active');
					$('body').css('overflow', '');
				}, 400);
			}

			// Close mobile menu on close button click
			mobileMenuClose.on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				closeMobileMenu();
			});

			// Close mobile menu on overlay click
			mobileMenuOverlay.on('click', function(e) {
				e.preventDefault();
				closeMobileMenu();
			});

			// Prevent clicks inside mobile menu from closing it
			mobileMenu.on('click', function(e) {
				e.stopPropagation();
			});

			// Close mobile menu when clicking menu items
			$('.mobile-menu-item').on('click', function() {
				closeMobileMenu();
			});

			// Handle dropdown menu for desktop
			$('.nav-item.dropdown').on('click', function(e) {
				if ($(window).width() > 768) {
					e.preventDefault();
					$(this).toggleClass('active');
					$(this).find('.dropdown').slideToggle(200);
				}
			});

			// Close dropdown when clicking outside
			$(document).on('click', function(e) {
				if (!$(e.target).closest('.nav-item.dropdown').length && $(window).width() > 768) {
					$('.nav-item.dropdown').removeClass('active');
					$('.dropdown').slideUp(200);
				}
			});

			// Ensure dropdowns are visible on desktop and hidden on mobile
			$(window).on('resize', function() {
				if ($(window).width() > 768) {
					$('.dropdown').css('display', '');
					closeMobileMenu();
				}
			});

			// ENHANCED IMAGE SLIDER FUNCTIONALITY
			function initializeSliders() {
				$('.image-slider-container').each(function() {
					const container = $(this);
					const track = container.find('.slider-track');
					const images = container.find('.slider-image');
					const prevBtn = container.find('.slider-prev');
					const nextBtn = container.find('.slider-next');
					const dots = container.find('.slider-dot');
					
					// Skip if only one image
					if (images.length <= 1) return;
					
					let currentIndex = 0;
					const totalImages = images.length;
					let autoPlayInterval;
					let isTransitioning = false;
					
					// Update slider position with smooth animation
					function updateSlider(animate = true) {
						if (isTransitioning) return;
						
						if (!animate) {
							track.css('transition', 'none');
						} else {
							track.css('transition', 'transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)');
							isTransitioning = true;
							setTimeout(() => {
								isTransitioning = false;
							}, 600);
						}
						
						const translateX = -currentIndex * 100;
						track.css('transform', `translateX(${translateX}%)`);
						
						// Update active dot with animation
						dots.removeClass('active');
						dots.eq(currentIndex).addClass('active');
						
						// Restore transition after immediate update
						if (!animate) {
							setTimeout(() => {
								track.css('transition', 'transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)');
							}, 50);
						}
					}
					
					// Next image with boundary check
					function nextImage() {
						if (isTransitioning) return;
						currentIndex = (currentIndex + 1) % totalImages;
						updateSlider();
					}
					
					// Previous image with boundary check
					function prevImage() {
						if (isTransitioning) return;
						currentIndex = (currentIndex - 1 + totalImages) % totalImages;
						updateSlider();
					}
					
					// Go to specific image
					function goToImage(index) {
						if (isTransitioning || index === currentIndex) return;
						currentIndex = index;
						updateSlider();
					}
					
					// Enhanced auto-play functionality
					function startAutoPlay() {
						stopAutoPlay();
						autoPlayInterval = setInterval(function() {
							if (!container.is(':hover') && !document.hidden) {
								nextImage();
							}
						}, 4000); // 4 seconds for better user experience
					}
					
					function stopAutoPlay() {
						if (autoPlayInterval) {
							clearInterval(autoPlayInterval);
							autoPlayInterval = null;
						}
					}
					
					function resetAutoPlay() {
						if (!container.hasClass('user-interacting')) {
							startAutoPlay();
						}
					}
					
					// Button event listeners with improved feedback
					nextBtn.on('click', function(e) {
						e.preventDefault();
						e.stopPropagation();
						nextImage();
						container.addClass('user-interacting');
						setTimeout(() => {
							container.removeClass('user-interacting');
							resetAutoPlay();
						}, 3000);
					});
					
					prevBtn.on('click', function(e) {
						e.preventDefault();
						e.stopPropagation();
						prevImage();
						container.addClass('user-interacting');
						setTimeout(() => {
							container.removeClass('user-interacting');
							resetAutoPlay();
						}, 3000);
					});
					
					// Dot navigation with keyboard support
					dots.on('click keypress', function(e) {
						if (e.type === 'keypress' && e.which !== 13 && e.which !== 32) return;
						e.preventDefault();
						e.stopPropagation();
						const index = $(this).data('slide');
						goToImage(index);
						container.addClass('user-interacting');
						setTimeout(() => {
							container.removeClass('user-interacting');
							resetAutoPlay();
						}, 3000);
					});
					
					// Hover controls
					container.on('mouseenter', function() {
						stopAutoPlay();
					});
					
					container.on('mouseleave', function() {
						if (!container.hasClass('user-interacting')) {
							startAutoPlay();
						}
					});
					
					// Enhanced touch/swipe support
					let startX = 0;
					let startY = 0;
					let isDragging = false;
					let hasMovedVertically = false;
					
					container.on('touchstart mousedown', function(e) {
						if (e.type === 'mousedown' && e.button !== 0) return;
						
						isDragging = true;
						hasMovedVertically = false;
						const clientX = e.type === 'touchstart' ? e.originalEvent.touches[0].clientX : e.clientX;
						const clientY = e.type === 'touchstart' ? e.originalEvent.touches[0].clientY : e.clientY;
						startX = clientX;
						startY = clientY;
						
						container.addClass('touching');
						stopAutoPlay();
						
						// Prevent text selection on mouse drag
						if (e.type === 'mousedown') {
							e.preventDefault();
						}
					});
					
					container.on('touchmove mousemove', function(e) {
						if (!isDragging) return;
						
						const clientX = e.type === 'touchmove' ? e.originalEvent.touches[0].clientX : e.clientX;
						const clientY = e.type === 'touchmove' ? e.originalEvent.touches[0].clientY : e.clientY;
						
						const deltaX = Math.abs(clientX - startX);
						const deltaY = Math.abs(clientY - startY);
						
						// Determine if this is a vertical scroll
						if (deltaY > deltaX && deltaY > 10) {
							hasMovedVertically = true;
							return;
						}
						
						// Prevent scrolling if horizontal movement is detected
						if (deltaX > 10 && !hasMovedVertically) {
							e.preventDefault();
						}
					});
					
					container.on('touchend mouseup', function(e) {
						if (!isDragging) return;
						isDragging = false;
						container.removeClass('touching');
						
						// Don't trigger swipe if there was vertical movement
						if (hasMovedVertically) {
							startAutoPlay();
							return;
						}
						
						const clientX = e.type === 'touchend' ? 
							e.originalEvent.changedTouches[0].clientX : e.clientX;
						const diff = startX - clientX;
						const threshold = 50;
						
						if (Math.abs(diff) > threshold) {
							container.addClass('user-interacting');
							if (diff > 0) {
								nextImage();
							} else {
								prevImage();
							}
							setTimeout(() => {
								container.removeClass('user-interacting');
								startAutoPlay();
							}, 3000);
						} else {
							startAutoPlay();
						}
					});
					
					// Handle mouse leave during drag
					container.on('mouseleave', function() {
						if (isDragging) {
							isDragging = false;
							container.removeClass('touching');
							startAutoPlay();
						}
					});
					
					// Visibility change handling
					$(document).on('visibilitychange', function() {
						if (document.hidden) {
							stopAutoPlay();
						} else if (!container.hasClass('user-interacting') && !container.is(':hover')) {
							startAutoPlay();
						}
					});
					
					// Initialize
					updateSlider(false);
					
					// Start auto-play with delay to ensure proper initialization
					setTimeout(() => {
						startAutoPlay();
					}, 100);
					
					// Intersection Observer for performance optimization
					if ('IntersectionObserver' in window) {
						const observer = new IntersectionObserver((entries) => {
							entries.forEach((entry) => {
								if (entry.isIntersecting) {
									if (!container.hasClass('user-interacting') && !container.is(':hover')) {
										startAutoPlay();
									}
								} else {
									stopAutoPlay();
								}
							});
						}, { threshold: 0.1 });
						
						observer.observe(container[0]);
					}
				});
			}
			
			// Initialize sliders after DOM is ready
			initializeSliders();
			
			// Reinitialize on dynamic content load
			$(document).on('DOMNodeInserted', '.image-slider-container', function() {
				setTimeout(initializeSliders, 100);
			});
			
			// Handle window resize
			$(window).on('resize', debounce(function() {
				initializeSliders();
			}, 250));
			
			// Debounce function for performance
			function debounce(func, wait) {
				let timeout;
				return function executedFunction(...args) {
					const later = () => {
						clearTimeout(timeout);
						func(...args);
					};
					clearTimeout(timeout);
					timeout = setTimeout(later, wait);
				};
			}
		});
	</script>
	{% block extra_js %}{% endblock %}
</body>
</html>